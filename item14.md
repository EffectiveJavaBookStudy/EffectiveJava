# Item 14

> ## Comparableì„ êµ¬í˜„í• ì§€ ê³ ë ¤í•˜ë¼

ìˆœì„œë¥¼ ê³ ë ¤í•´ì•¼ë˜ëŠ” ê°’ì˜ í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•˜ë ¤í•˜ë©´ Comparableì„ êµ¬í˜„í•´ì„œ ì»¬ë ‰ì…˜ê³¼ ê°™ì´ì¨ë¼. ê·¸ë¦¬ê³  ìˆœì„œë¥¼ ê²°ì •ì§€ì„ ë•Œ >, < ì—°ì‚°ìë³´ë‹¤ compare() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ë¼.

## ë“¤ì–´ê°€ê¸°ì „

ìë°”ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ natral orderê°€ ìˆë‹¤. ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ì´ë‹¤. ê·¸ë˜ì„œ ìë°”ëŠ” ì´ ì˜¤ë¦„ì°¨ìˆœì„ ê¸°ì¤€ìœ¼ë¡œ ìˆœì„œë¥¼ ì •ë ¬í•œë‹¤.

ë˜í•œ ìë°”ì˜ ëª¨ë“  ê°’ì„ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ë“¤ì€ Comparableì„ êµ¬í˜„í–ˆë‹¤. 

ë˜í•œ ìˆœì„œì— ì˜í•´ì„œ ì •ë ¬ì„ ì§„í–‰í•˜ëŠ” ìˆœì„œê°€ ìˆëŠ” ê²ƒë“¤ë„ êµ¬í˜„ë˜ì–´ìˆìŠµë‹ˆë‹¤.


---

## Comparable

```java
public interface Comparable<T> {
    public int compareTo(T o);
}
```
ì´ê²ƒì´ Comparable ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤. ì´ê±°ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ë“¤ì€ compareToë¥¼ Overrideí•´ì„œ ì¬ì •ì˜í•˜ë©´ ë©ë‹ˆë‹¤.



ê¸°ë³¸ ì˜ˆì‹œ

```java
package com.fund;

import java.util.PriorityQueue;

public class Test {
    static class Edge implements Comparable<Edge>{
        int dest,cost;
        public Edge(int dest, int cost) {
            this.dest = dest;
            this.cost = cost;
        }
        @Override
        public int compareTo(Edge o) {
            return Integer.compare(this.cost,o.cost);
        }
    }
    public static void main(String[] args) {
        PriorityQueue<Edge> pq = new PriorityQueue<>();
        pq.add(new Edge(1,10));
        pq.add(new Edge(2,4));

        System.out.println(pq.poll().cost);
    }
}
```

ì´ë ‡ê²Œ ë„£ìœ¼ë©´ ë„£ì€ ìˆœì„œëŒ€ë¡œì¸ 10ì´ ë‚˜ì˜¤ëŠ” ê²ƒì´ ì•„ë‹Œ ì •ë ¬ëœ 4ê°€ ë‚˜ì˜¤ê²Œë©ë‹ˆë‹¤. ìˆœì„œê°€ ì •í•´ì§€ëŠ” ê²ƒì´ì£ .

### ì–´ë–»ê²Œ ì •ë ¬ì´ ë ê¹Œìš”?

>Integer.compare 

ìœ„ ë©”ì†Œë“œì— ìˆìŠµë‹ˆë‹¤.

ë§í–ˆë˜ê²ƒì²˜ëŸ¼ ìë°”ëŠ” ì˜¤ë¦„ì°¨ìˆœì„ ê¸°ë³¸ìœ¼ë¡œ ì¡ìŠµë‹ˆë‹¤. ê·¸ê²ƒì„ ê¸°ì¤€ìœ¼ë¡œ ê°’ì´ ì‘ìœ¼ë©´ ìŒì˜ì •ìˆ˜ë¥¼, ê°™ìœ¼ë©´ 0ì„ ,  í¬ë©´ ì–‘ì˜ ì •ìˆ˜ë¡œ ë°˜í™˜í•˜ì£ .

Integer.compare(1,2)ì´ë©´ 1ì´ 2ë³´ë‹¤ ì‘ê¸°ì— ìŒìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ìŒìˆ˜ê°€ ë°˜í™˜ë˜ë©´ ìë°”ì˜ ê¸°ë³¸ ìˆœì„œê°€ ì˜¤ë¦„ì°¨ìˆœì´ê¸°ì— ìˆœì„œë¥¼ ë°”ê¾¸ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤.

ì¦‰ 1 2 ì´ìƒíƒœê°€ ìœ ì§€ë˜ëŠ” ê²ƒì´ì£ .

Integer.compare(2,1)ì´ë©´ ì–‘ìˆ˜ê°€ ë°˜í™˜ë˜ê³  ìˆœì„œê°€ ë°”ë€Œê² ì£ . ê·¸ëŸ¬ë©´ ê¶ê¸ˆí•œê²Œ ìˆ«ìë¥¼ ë¹„êµí•´ì„œ ê·¸ëƒ¥ 2 -1 ì´ë ‡ê²Œ í•˜ë©´ ë˜ì§€ ì•Šë‚˜?ë¼ê³  ìƒê°í• ìˆ˜ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ - ì—°ì‚°ìë¡œ êµ¬í˜„í•˜ê²Œë˜ë©´ ì•Œë‹¤ì‹œí”¼ ì˜¤ë²„í”Œë¡œìš±ê°€ ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ í”¼í•©ì‹œë‹¤. ë˜í•œ ê·¸ëƒ¥ -1 +1 ì´ë ‡ê²Œ ê°’ì„ ë¦¬í„´í•˜ë©´ ë˜ì–ì•„ìš”~ ë¼ê³  í•  ìˆ˜ ë„ ìˆì§€ë§Œ ì´ëŸ° ê²½ìš° ëŒ€ë¶€ë¶„ 0ì„ ë¦¬í„´í•˜ëŠ” ê²ƒì„ ê¹Œë¨¹ì–´ì„œ ì‹¤ìˆ˜ë¥¼ ë§Œë“¤ì£ .

## compareToì˜ ì¼ë°˜ê·œì•½ì€ ë­ì§€

equalsì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤. 

### 1. ë°˜ì‚¬ì„±

ê°™ì€ ê°ì²´ëŠ” í•­ìƒ ë¹„êµ ê²°ê³¼ê°€ ê°™ì•„ì•¼ í•œë‹¤.


### 2. ëŒ€ì¹­ì„±

ë‘ ê°ì²´ì˜ ìˆœì„œë¥¼ ë°”ê¿”ì„œ ë¹„êµí•´ë„ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì™€ì•¼í•©ë‹ˆë‹¤.
### 3. ì¶”ì´ì„±

x > yì´ê³  y > zì´ë©´ x > zì´ì–´ì•¼ í•œë‹¤.

### 4. equals()
(x.compareTo(y)==0) == (x.equals(y)) ë¥¼ ë§Œì¡±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë§Œì•½ ì´ë¥¼ ë§Œì¡±í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ê·¸ ì‚¬ì‹¤ì„ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

ì´ ë¶€ë¶„ì˜ ì˜ˆì‹œë¡œ TreeSetê°™ì´ ìˆœì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ì»¬ë ‰ì…˜ë“¤ì€ ë‚´ë¶€ì—ì„œ ì •ë ¬í• ë•Œ compareToë¡œ í•˜ê¸°ì— equalsë§Œ êµ¬í˜„í•œê²ƒì´ë‘ ê²°ê³¼ê°€ ë‹¤ë¥¼ ê²ƒì…ë‹ˆë‹¤.




### í•´ë‹¹ í´ë˜ìŠ¤ì™€ ë¹„êµí•´ë¼ 

```java
public interface Comparable<T> {
    public int compareTo(T o);
}
```

ìœ„ì—ì„œ ë³´ë‹¤ì‹œí”¼ ì œë„¤ë¦­ìœ¼ë¡œ ì–´ë–¤ ì°¸ì¡°ì™€ë„ ë¹„êµê°€ê°€ëŠ¥í•˜ì§€ë§Œ ë³´í†µ ìœ„ì˜ ì¢‹ì€ ì˜ˆì‹œì²˜ëŸ¼ í•´ë‹¹ í´ë˜ìŠ¤ì™€ ë¹„êµí•˜ë„ë¡ ì„¤ì •í•œë‹¤.


### ë¹„êµí• ê²Œ ë§ë‹¤ë©´ ìˆœì„œì •ë ¬ì´ ë³µì¡í•˜ë‹¤ë©´ 

í•µì‹¬ì ì¸ í•„ë“œë¥¼ ìš°ì„ ìœ¼ë¡œ ë¹„êµí•˜ì!! 

```java
public int compare(final PhoneNumber phoneNumber) {
        // ì§€ì—­ë²ˆí˜¸ë¥¼ ë¨¼ì € 
        int result = Short.compare(areaCode, phoneNumber.areaCode);
        // ì§€ì—­ë²ˆí˜¸ê°€ ê°™ë‹¤ë©´ 
        if (result == 0) {
            //  ê·¸ ë‹¤ìŒë²ˆí˜¸ 
            result = Short.compare(prefix, phoneNumber.prefix);
            if (result == 0) {
                result = Short.compare(lineNum, phoneNumber.lineNum);
            }
        }

        return result;
}
```
ì´ë ‡ê²Œ Comparableë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„í•  ìˆ˜ë„ ìˆì§€ë§Œ ì„±ëŠ¥ì ìœ¼ë¡œ ë›°ì–´ë‚˜ì§„ ì•ŠìŠµë‹ˆë‹¤ í° ì°¨ì´ëŠ” ì—†ê¸´í•©ë‹ˆë‹¤.


ì™¸ë¶€ì—ì„œ ì •ë ¬ ìˆœì„œë¥¼ ì •í•˜ëŠ” Comparatorë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„ë„ ê°€ëŠ¥í•˜ë‹¤.

í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— ëŒ€í•´ì„œ ì—¬ëŸ¬ê°€ì§€ ìˆœì„œ ì •ë ¬ì´ í•„ìš”í• ë•Œ ì“°ëŠ”ê²Œ ì¢‹ë‹¤.


```java
private static final Comparator<PhoneNumber> COMPARATOR =
        Comparator.comparingInt((PhoneNumber phoneNumber) -> phoneNumber.areaCode)
                  .thenComparingInt(phoneNumber -> phoneNumber.prefix)
                  .thenComparingInt(phoneNumber -> phoneNumber.lineNum);

@Override
public int compareTo(PhoneNumber phoneNumber) {
    return COMPARATOR.compare(this, phoneNumber);
}

```
comparingInt()ì€ Comparatorì˜ ì •ì  ë©”ì„œë“œì´ë©°, PhoneNumber ê°ì²´ì—ì„œ areaCode ê°’ì„ ì¶”ì¶œí•˜ì—¬ ë¹„êµí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
ë‚´ë¶€ì ìœ¼ë¡œ Integer.compare()ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘ ê°œì˜ areaCode ê°’ì„ ë¹„êµí•©ë‹ˆë‹¤.

thenComparingInt()ëŠ” ì²« ë²ˆì§¸ ë¹„êµ(areaCode)ì˜ ê²°ê³¼ê°€ ê°™ì„ ê²½ìš° prefixë¥¼ ë¹„êµí•©ë‹ˆë‹¤.
ì¦‰, areaCodeê°€ ê°™ë‹¤ë©´ prefix ê°’ìœ¼ë¡œ ì •ë ¬í•©ë‹ˆë‹¤.

# ğŸ˜ ê²°ë¡  

ê°ì²´ ìì²´ì— ê±¸ì–´ì„œ ì“°ê³  ì‹¶ìœ¼ë©´ Comparable

ì—¬ëŸ¬ê°€ì§€ ì •ë ¬ ì¡°ê±´ì„ ì“°ê³  ì‹¶ë‹¤ Comparator

### ê°„ë‹¨í•œ ì„±ëŠ¥ì´ì•¼ê¸°.

ê¸°ë³¸ì ìœ¼ë¡œ ë‘˜ì€ ë¹„êµ ê¸°ì¤€ì„ ì •ì˜í•œ ê²ƒì´ë¯€ë¡œ ì‹œê°„ë³µì¡ë„ëŠ” êµ¬í˜„í•œ ìë£Œêµ¬ì¡°ì— ë”°ë¼ì„œ ë‹¬ë¼ì§„ë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ì„œ ìš°ì„ ìˆœìœ„ íë¥¼ ê°€ì§€ê³  êµ¬í˜„í–ˆìœ¼ë©´ Nê°œì— ëŒ€í•˜ì—¬ N log Nì„ ê°€ì§€ê²Œ ë˜ëŠ” ê²ƒ.

ê·¸ ì´ì™¸ì˜ ë‘˜ì˜ ì°¨ì´ëŠ” ê°ì²´ ìƒì„± ì—¬ë¶€ ì´ë‹¤.

Comparableì€ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ìê¸° ìì‹ ì´ ê°€ì§€ê³  ìˆê¸°ì— ê°ì²´ ìƒì„±ì˜ Overheadê°€ ë“¤ì§€ ì•ŠëŠ”ë‹¤.
ComparatorëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì™¸ë¶€ì—ì„œ ì§€ì •í•˜ëŠ” ê²ƒì´ì—¬ì„œ Overheadê°€ ë°œìƒí•œë‹¤.

í•˜ì§€ë§Œ Comparatorë¥¼ ìµëª…í´ë˜ìŠ¤ë¡œ staticí•˜ê²Œ ì •ì˜í•˜ë©´ í”„ë¡œê·¸ë¨ ì‹¤í–‰ì‹œ
JVMì˜ ë©”ëª¨ë¦¬ ê³µê°„ Method areaì— ì˜¬ë¼ê°€ ê°ì²´ ìƒì„± OverHeadê°€ ì—†ë‹¤.

ë”°ë¼ì„œ ì„±ëŠ¥ ë¶€ë¶„ì€ ë˜ì´ë˜ì´ í•œê²ƒ

